@model Tuple<Dostawa,Uzytkownik>
@{
    ViewData["Title"] = "Złóż zamówienie";
}

<style>
    .main {
        margin-bottom: 3rem;
    }
</style>

<div class="container py-4">
    <div class="row justify-content-center main">
        <div class="col-lg-8 col-md-10 col-sm-12">
            <div class="card shadow-lg border-0">
                <div class="card-header bg-primary text-white text-center">
                    <h3 class="mb-0">Złóż zamówienie</h3>
                </div>
                <div class="card-body">
                    <h5 class="mb-4">Łączna cena: <strong>32.00 zł</strong></h5>

                    <form asp-action="SubmitOrder" method="post" class="row g-3">
                        <div class="col-12">
                            <label class="form-label">Metoda dostawy</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="deliveryMethod" value="true" id="radioDelivery1" checked />
                                <label class="form-check-label" for="radioDelivery1">Dostawa</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="deliveryMethod" value="false" id="radioPickup1" />
                                <label class="form-check-label" for="radioPickup1">Odbiór osobisty</label>
                            </div>
                        </div>

                        <div id="deliveryFields1">
                            <div class="col-12">
                                <label class="form-label">Miejscowość</label>
                                <input asp-for="Item1.Miejscowosc" class="form-control" required />
                            </div>
                            <div class="col-12">
                                <label class="form-label">Ulica</label>
                                <input asp-for="Item1.Ulica" class="form-control" required />
                            </div>
                            <div class="col-12">
                                <label class="form-label">Numer budynku</label>
                                <input asp-for="Item1.NumerBudynku" class="form-control" required />
                            </div>
                            <div class="col-12">
                                <label class="form-label">Kod pocztowy</label>
                                <input asp-for="Item1.KodPocztowy" class="form-control" required />
                            </div>
                        </div>

                        <div class="col-12 mt-3">
                            <button type="submit" class="btn btn-success btn-lg w-100 shadow-sm">Zamów (płatność gotówką)</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!--To jest formularz dla gościa. Trzeba będzie go wydzielić który się pokazuje w zależności czy zamawia gość czy ktoś zalogowany-->
<div class="container py-4 main">
    <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10 col-sm-12">
            <div class="card shadow-lg border-0">
                <div class="card-header bg-primary text-white text-center">
                    <h3 class="mb-0">Złóż zamówienie</h3>
                </div>
                <div class="card-body">
                    <h5 class="mb-4">Łączna cena: <strong>32.00 zł</strong></h5>

                    <form asp-action="SubmitOrder" method="post" class="row g-3">
                        <div class="col-12">
                            <label class="form-label">Imię</label>
                            <input asp-for="Item2.Imie" class="form-control" required />
                        </div>
                        <div class="col-12">
                            <label class="form-label">Nazwisko</label>
                            <input asp-for="Item2.Nazwisko" class="form-control" required />
                        </div>
                        <div class="col-12">
                            <label class="form-label">Email</label>
                            <input asp-for="Item2.Email" class="form-control" type="email" required />
                        </div>
                        <div class="col-12">
                            <label class="form-label">Numer telefonu</label>
                            <input asp-for="Item2.PhoneNumber" class="form-control" type="tel" required />
                        </div>

                        <div class="col-12">
                            <label class="form-label">Metoda dostawy</label>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="deliveryMethod" value="true" id="radioDelivery2" checked />
                                <label class="form-check-label" for="radioDelivery2">Dostawa</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="deliveryMethod" value="false" id="radioPickup2" />
                                <label class="form-check-label" for="radioPickup2">Odbiór osobisty</label>
                            </div>
                        </div>

                        <div id="deliveryFields2">
                            <div class="col-12">
                                <label class="form-label">Miejscowość</label>
                                <input asp-for="Item1.Miejscowosc" class="form-control" required />
                            </div>
                            <div class="col-12">
                                <label class="form-label">Ulica</label>
                                <input asp-for="Item1.Ulica" class="form-control" required />
                            </div>
                            <div class="col-12">
                                <label class="form-label">Numer budynku</label>
                                <input asp-for="Item1.NumerBudynku" class="form-control" required />
                            </div>
                            <div class="col-12">
                                <label class="form-label">Kod pocztowy</label>
                                <input asp-for="Item1.KodPocztowy" class="form-control" required />
                            </div>
                        </div>

                        <div class="col-12 mt-3">
                            <button type="submit" class="btn btn-success btn-lg w-100 shadow-sm">Zamów (płatność gotówką)</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        function setupToggle(radioDeliveryId, radioPickupId, deliveryFieldsId) {
            const radioDelivery = document.getElementById(radioDeliveryId);
            const radioPickup = document.getElementById(radioPickupId);
            const deliveryFields = document.getElementById(deliveryFieldsId);

            function toggleFields() {
                if (radioPickup.checked) {
                    deliveryFields.style.display = 'none';
                    deliveryFields.querySelectorAll('input').forEach(input => input.value = '');
                } else {
                    deliveryFields.style.display = 'block';
                }
            }

            radioDelivery.addEventListener('change', toggleFields);
            radioPickup.addEventListener('change', toggleFields);
            toggleFields();
        }

        setupToggle('radioDelivery1', 'radioPickup1', 'deliveryFields1');
        setupToggle('radioDelivery2', 'radioPickup2', 'deliveryFields2');
    });
</script>
