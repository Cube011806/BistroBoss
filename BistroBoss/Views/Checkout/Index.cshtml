@model Zamowienie

@if (User.Identity.IsAuthenticated)
{
    <form asp-action="SubmitOrder" method="post" class="row g-3">
        <div class="col-12">
            <label class="form-label">Metoda dostawy</label>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="deliveryMethod" value="true" id="radioDelivery1" checked />
                <label class="form-check-label" for="radioDelivery1">Dostawa</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="deliveryMethod" value="false" id="radioPickup1" />
                <label class="form-check-label" for="radioPickup1">Odbiór osobisty</label>
            </div>
        </div>

        <div id="deliveryFields1">
            <div class="col-12">
                <label class="form-label">Imię</label>
                <input asp-for="Uzytkownik.Imie" class="form-control" required />
            </div>
            <div class="col-12">
                <label class="form-label">Nazwisko</label>
                <input asp-for="Uzytkownik.Nazwisko" class="form-control" required />
            </div>
            <div class="col-12">
                <label class="form-label">Email</label>
                <input asp-for="Uzytkownik.Email" class="form-control" type="email" required />
            </div>
            <div class="col-12">
                <label class="form-label">Numer telefonu</label>
                <input asp-for="Uzytkownik.PhoneNumber" class="form-control" type="tel" required />
            </div>
            <div class="col-12">
                <label class="form-label">Miejscowość</label>
                <input asp-for="Miejscowosc" class="form-control" required />
            </div>
            <div class="col-12">
                <label class="form-label">Ulica</label>
                <input asp-for="Ulica" class="form-control" required />
            </div>
            <div class="col-12">
                <label class="form-label">Numer budynku</label>
                <input asp-for="NumerBudynku" class="form-control" required />
            </div>
            <div class="col-12">
                <label class="form-label">Kod pocztowy</label>
                <input asp-for="KodPocztowy" class="form-control" required />
            </div>
        </div>

        <div class="col-12 mt-3">
            <button type="submit" class="btn btn-success btn-lg w-100 shadow-sm">Zamów (płatność gotówką)</button>
        </div>
    </form>
}
else
{
    <form asp-action="SubmitOrder" method="post" class="row g-3">
        <div class="col-12">
            <label class="form-label">Imię</label>
            <input class="form-control" required />
        </div>
        <div class="col-12">
            <label class="form-label">Nazwisko</label>
            <input class="form-control" required />
        </div>
        <div class="col-12">
            <label class="form-label">Email</label>
            <input  class="form-control" type="email" required />
        </div>
        <div class="col-12">
            <label class="form-label">Numer telefonu</label>
            <input class="form-control" type="tel" required />
        </div>

        <div class="col-12">
            <label class="form-label">Metoda dostawy</label>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="deliveryMethod" value="true" id="radioDelivery2" checked />
                <label class="form-check-label" for="radioDelivery2">Dostawa</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="deliveryMethod" value="false" id="radioPickup2" />
                <label class="form-check-label" for="radioPickup2">Odbiór osobisty</label>
            </div>
        </div>

        <div id="deliveryFields2">
            <div class="col-12">
                <label class="form-label">Miejscowość</label>
                <input asp-for="Miejscowosc" class="form-control" required />
            </div>
            <div class="col-12">
                <label class="form-label">Ulica</label>
                <input asp-for="Ulica" class="form-control" required />
            </div>
            <div class="col-12">
                <label class="form-label">Numer budynku</label>
                <input asp-for="NumerBudynku" class="form-control" required />
            </div>
            <div class="col-12">
                <label class="form-label">Kod pocztowy</label>
                <input asp-for="KodPocztowy" class="form-control" required />
            </div>
        </div>

        <div class="col-12 mt-3">
            <button type="submit" class="btn btn-success btn-lg w-100 shadow-sm">Zamów (płatność gotówką)</button>
        </div>
    </form>
}




<script>
    document.addEventListener('DOMContentLoaded', function () {
        function setupToggle(radioDeliveryId, radioPickupId, deliveryFieldsId) {
            const radioDelivery = document.getElementById(radioDeliveryId);
            const radioPickup = document.getElementById(radioPickupId);
            const deliveryFields = document.getElementById(deliveryFieldsId);

            function toggleFields() {
                if (radioPickup.checked) {
                    deliveryFields.style.display = 'none';
                    deliveryFields.querySelectorAll('input').forEach(input => input.value = '');
                } else {
                    deliveryFields.style.display = 'block';
                }
            }

            radioDelivery.addEventListener('change', toggleFields);
            radioPickup.addEventListener('change', toggleFields);
            toggleFields();
        }

        setupToggle('radioDelivery1', 'radioPickup1', 'deliveryFields1');
        setupToggle('radioDelivery2', 'radioPickup2', 'deliveryFields2');
    });
</script>
